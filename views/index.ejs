<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Free mental health resources and suicide prevention support. Access trusted hotlines, therapy services, and support groups - no account required." />
        <meta name="author" content="Suicide Prevention Resource Hub" />
        <title>Mental Health Resources - You Are Not Alone</title>
        <!-- Favicon-->
        <link rel="icon" type="image/svg+xml" href="assets/heart-favicon.svg" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" type="text/css" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/styles.css" rel="stylesheet" />
        <style>
            /* Emergency banner styling */
            .emergency-banner {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                padding: 8px 0;
                position: sticky;
                top: 0;
                z-index: 1030;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            }
            .emergency-banner-content {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .emergency-btn {
                background-color: #fff;
                color: #dc3545;
                border: 2px solid #fff;
                font-weight: 700;
                font-size: 0.9rem;
                padding: 6px 16px;
                transition: all 0.3s ease;
                text-decoration: none;
                display: inline-block;
                border-radius: 6px;
                white-space: nowrap;
            }
            .emergency-btn:hover {
                background-color: #dc3545;
                color: #fff;
                transform: scale(1.05);
            }
            
            /* Hero Section */
            .hero-section {
                background-image: url('/assets/img/bg-masthead.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                color: white;
                padding: 0;
                margin-bottom: 0;
                min-height: 500px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .hero-section h1 {
                font-size: 5.5rem;
                font-weight: 700;
                margin-bottom: 1.5rem;
            }
            .hero-section p {
                font-size: 1.75rem;
                font-weight: 400;
                opacity: 0.95;
            }

            /* Search Bar */
            .search-container {
                max-width: 800px;
                margin: 0 auto;
            }

            .search-container input,
            .search-container select {
                padding: 0.75rem 1rem;
                border: 2px solid rgba(255, 255, 255, 0.5);
                background-color: rgba(255, 255, 255, 0.9);
                border-radius: 8px;
                font-size: 1rem;
            }

            .search-container input:focus,
            .search-container select:focus {
                border-color: #fff;
                background-color: #fff;
                box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
            }

            .search-container select {
                cursor: pointer;
                font-weight: 500;
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23212529' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 0.75rem center;
                background-size: 12px;
                padding-right: 2.5rem;
            }

            .search-container select::-ms-expand {
                display: none;
            }

            .search-container select option {
                background-color: #fff;
                color: #212529;
                padding: 0.75rem 1rem;
                font-weight: 500;
            }

            .search-container select option:hover {
                background-color: #f8f9fa;
            }

            .search-container select option:checked {
                background-color: #5a8eb8;
                color: #fff;
            }

            /* Resource Categories */
            .resource-section {
                padding: 3rem 0;
                background-color: #f5f0e8;
            }

            /* Category Headers - Matching Dashboard */
            .category-header {
                display: flex;
                align-items: center;
                margin-bottom: 1.5rem;
                padding-bottom: 0.75rem;
                border-bottom: 3px solid #5a8eb8;
            }

            /* Category-specific border colors */
            #crisis .category-header {
                border-bottom-color: #c85a5a;
            }

            #therapy .category-header {
                border-bottom-color: #5a8eb8;
            }

            #support .category-header {
                border-bottom-color: #5a9e6f;
            }

            #education .category-header {
                border-bottom-color: #7a6a9a;
            }

            #wellness .category-header {
                border-bottom-color: #5a9a9a;
            }

            .category-icon {
                font-size: 2rem;
                margin-right: 1rem;
            }

            .category-title {
                margin: 0;
                font-size: 1.75rem;
                font-weight: 700;
                color: #212529;
            }

            /* Resource Cards - Matching Dashboard */
            .resource-card {
                background-color: #fff;
                border-radius: 12px;
                padding: 1.5rem;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                transition: all 0.3s;
                position: relative;
                height: 100%;
                display: flex;
                flex-direction: column;
            }

            .resource-card:hover {
                box-shadow: 0 4px 16px rgba(0,0,0,0.15);
                transform: translateY(-2px);
            }

            .resource-card h5 {
                font-size: 1.25rem;
                font-weight: 700;
                margin-bottom: 0.75rem;
                color: #212529;
            }

            .resource-card p {
                color: #6c757d;
                margin-bottom: 1rem;
                font-size: 0.95rem;
                flex-grow: 1;
            }

            .resource-type-badge {
                display: inline-block;
                padding: 0.25rem 0.75rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 600;
                margin-bottom: 0.75rem;
            }

            .badge-crisis {
                background-color: #f5d7d7;
                color: #a84444;
            }

            .badge-therapy {
                background-color: #d4e4f1;
                color: #3a6a8a;
            }

            .badge-support {
                background-color: #d9e8df;
                color: #4a7a5a;
            }

            .badge-education {
                background-color: #e4daf0;
                color: #6b5a8a;
            }

            .badge-wellness {
                background-color: #d6ebe8;
                color: #3a7a7a;
            }
            
            /* Global button styling with outlines */
            .btn {
                box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
                transition: all 0.3s ease;
            }

            .btn-primary {
                box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
            }

            .btn-primary:hover {
                box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.3);
            }

            .btn-success {
                box-shadow: 0 0 0 3px rgba(90, 158, 111, 0.2);
            }

            .btn-success:hover {
                box-shadow: 0 0 0 4px rgba(90, 158, 111, 0.3);
            }

            .btn-secondary {
                box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.2);
            }

            .btn-secondary:hover {
                box-shadow: 0 0 0 4px rgba(108, 117, 125, 0.3);
            }

            /* Action Buttons */
            .btn-call, .btn-text, .btn-visit, .btn-outline-secondary {
                font-size: 0.85rem;
                padding: 0.4rem 0.75rem;
                font-weight: 600;
                border-radius: 6px;
                transition: all 0.3s;
                height: 2.125rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .btn-call {
                background-color: #c85a5a;
                border-color: #c85a5a;
                color: white;
                box-shadow: 0 0 0 3px rgba(200, 90, 90, 0.2);
            }
            .btn-call:hover {
                background-color: #b34a4a;
                border-color: #a84444;
                color: white;
                box-shadow: 0 0 0 4px rgba(200, 90, 90, 0.3);
            }
            .btn-text {
                background-color: #5a8eb8;
                border-color: #5a8eb8;
                color: white;
                box-shadow: 0 0 0 3px rgba(90, 142, 184, 0.2);
            }
            .btn-text:hover {
                background-color: #4a7ea8;
                border-color: #3a6e98;
                color: white;
                box-shadow: 0 0 0 4px rgba(90, 142, 184, 0.3);
            }
            .btn-visit {
                background-color: #5a9e6f;
                border-color: #5a9e6f;
                color: white;
                box-shadow: 0 0 0 3px rgba(90, 158, 111, 0.2);
            }
            .btn-visit:hover {
                background-color: #4a8e5f;
                border-color: #4a8a5f;
                color: white;
                box-shadow: 0 0 0 4px rgba(90, 158, 111, 0.3);
            }
            
            /* CTA Section */
            .cta-section {
                background: linear-gradient(135deg, #5a8eb8 0%, #4a7ea8 100%);
                color: white;
                padding: 3rem 0;
                margin-top: 3rem;
            }
            .cta-section h2 {
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 1rem;
            }
            .cta-section .btn {
                padding: 0.75rem 2rem;
                font-size: 1.1rem;
                font-weight: 600;
            }
            
            /* Navbar */
            .navbar {
                background-color: #fff;
                box-shadow: 0 2px 4px rgba(0,0,0,0.08);
                padding: 1rem 0;
            }
            .navbar-brand {
                font-size: 1.25rem;
                font-weight: 700;
                color: #212529;
            }
            .navbar-nav .nav-link {
                font-size: 1rem;
                padding: 0.5rem 0.75rem;
                font-weight: 500;
            }
            .navbar-nav .dropdown-item {
                font-size: 0.95rem;
            }
            @media (max-width: 991px) {
                .navbar-collapse {
                    margin-top: 1rem;
                }
            }
            .btn-outline-primary {
                color: #5a8eb8;
                border-color: #5a8eb8;
                box-shadow: 0 0 0 3px rgba(90, 142, 184, 0.15);
            }
            .btn-outline-primary:hover {
                background-color: #5a8eb8;
                border-color: #5a8eb8;
                color: white;
                box-shadow: 0 0 0 4px rgba(90, 142, 184, 0.25);
            }
            
            /* Navbar buttons - match action button style */
            .navbar .btn {
                font-size: 0.85rem;
                padding: 0.4rem 0.75rem;
                font-weight: 600;
                border-radius: 6px;
                transition: all 0.3s;
                height: 2.125rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Contact info styling */
            .contact-info {
                font-size: 1.1rem;
                font-weight: 600;
                color: #212529;
                margin-bottom: 0.5rem;
            }
            .contact-info i {
                margin-right: 0.5rem;
            }
            .contact-info .text-danger {
                color: #c85a5a !important;
            }
            .contact-info .text-primary {
                color: #5a8eb8 !important;
            }
            .contact-info .text-success {
                color: #5a9e6f !important;
            }

            body {
                background-color: #f5f0e8;
            }
        </style>
    </head>
    <body>
        <!-- Emergency Banner -->
        <div class="emergency-banner" id="emergencyBanner">
            <div class="container">
                <div class="emergency-banner-content">
                    <a href="tel:988" class="emergency-btn">
                        <i class="bi-telephone-fill me-2"></i>Crisis? Call or Text 988 Now
                    </a>
                </div>
            </div>
        </div>

        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <i class="bi-heart-fill text-danger me-2"></i>Resource Hub
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="publicResourcesDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="bi-globe me-1"></i>Public Resources
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#crisis"><i class="bi-telephone me-2"></i>Crisis Support</a></li>
                                <li><a class="dropdown-item" href="#therapy"><i class="bi-chat-dots me-2"></i>Therapy</a></li>
                                <li><a class="dropdown-item" href="#support"><i class="bi-people me-2"></i>Support Groups</a></li>
                                <li><a class="dropdown-item" href="#education"><i class="bi-book me-2"></i>Education</a></li>
                                <li><a class="dropdown-item" href="#wellness"><i class="bi-heart me-2"></i>Wellness</a></li>
                            </ul>
                        </li>
                        <% if (isLoggedIn) { %>
                            <li class="nav-item">
                                <a class="nav-link" href="/dashboard">
                                    <i class="bi-bookmark-heart me-1"></i>My Dashboard
                                </a>
                            </li>
                            <% if (userLevel === 'M') { %>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown">
                                        <i class="bi-gear-fill me-1"></i>Admin
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="/admin"><i class="bi-shield-lock-fill me-2"></i>Manage Resources</a></li>
                                        <% if (userRoleId === 2) { %>
                                            <li><a class="dropdown-item" href="/manager"><i class="bi-people-fill me-2"></i>Manage Users</a></li>
                                        <% } %>
                                    </ul>
                                </li>
                            <% } %>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown">
                                    <i class="bi-person-circle me-1"></i>Profile
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="/profile"><i class="bi-person-fill me-2"></i>My Profile</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="/logout"><i class="bi-box-arrow-right me-2"></i>Logout</a></li>
                                </ul>
                            </li>
                        <% } else { %>
                            <li class="nav-item">
                                <a class="btn btn-outline-primary ms-lg-2" href="/login">Login</a>
                            </li>
                            <li class="nav-item">
                                <a class="btn btn-primary ms-2" href="/register">Sign Up</a>
                            </li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section text-center">
            <div class="container">
                <h1>You Are Not Alone</h1>
                <p class="lead mb-0">Free mental health resources and crisis support<br>No account required • Confidential • Available 24/7</p>

                <!-- Search Bar and Filter -->
                <div class="search-container mt-4">
                    <div class="row g-2">
                        <div class="col-md-8">
                            <input type="text" id="resourceSearch" class="form-control" placeholder="Search resources by name, category, or description...">
                        </div>
                        <div class="col-md-4">
                            <select id="categoryFilter" class="form-select">
                                <option value="all">All Categories</option>
                                <option value="crisis">Crisis Hotlines</option>
                                <option value="therapy">Therapy & Counseling</option>
                                <option value="support">Support Groups</option>
                                <option value="education">Educational Resources</option>
                                <option value="wellness">Wellness Tools</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <%
        // Group resources by category
        const categories = {};
        const categoryOrder = ['Crisis Hotlines', 'Therapy & Counseling', 'Support Groups', 'Education', 'Wellness Tools'];
        const categoryIcons = {
            'Crisis Hotlines': 'bi-telephone',
            'Therapy & Counseling': 'bi-chat-dots',
            'Support Groups': 'bi-people',
            'Education': 'bi-book',
            'Wellness Tools': 'bi-heart'
        };
        const categoryColors = {
            'Crisis Hotlines': '#c85a5a',
            'Therapy & Counseling': '#5a8eb8',
            'Support Groups': '#5a9e6f',
            'Education': '#7a6a9a',
            'Wellness Tools': '#5a9a9a'
        };
        const categorySectionIds = {
            'Crisis Hotlines': 'crisis',
            'Therapy & Counseling': 'therapy',
            'Support Groups': 'support',
            'Education': 'education',
            'Wellness Tools': 'wellness'
        };

        vettedResources.forEach(resource => {
            const catName = resource.categoryname || 'Other';
            if (!categories[catName]) {
                categories[catName] = [];
            }
            categories[catName].push(resource);
        });

        // Loop through categories in order
        categoryOrder.forEach(categoryName => {
            const resources = categories[categoryName];
            if (!resources || resources.length === 0) return;
        %>
            <section class="resource-section" id="<%= categorySectionIds[categoryName] %>">
                <div class="container">
                    <div class="category-header" style="border-bottom-color: <%= categoryColors[categoryName] %>;">
                        <i class="<%= categoryIcons[categoryName] %> category-icon" style="color: <%= categoryColors[categoryName] %>;"></i>
                        <h2 class="category-title"><%= categoryName %></h2>
                    </div>

                    <div class="row">
                    <% resources.forEach(resource => { %>
                        <div class="col-md-6 mb-4">
                            <div class="resource-card">
                                <%
                                let badgeClass = 'badge-crisis';
                                if (categoryName === 'Therapy & Counseling') badgeClass = 'badge-therapy';
                                else if (categoryName === 'Support Groups') badgeClass = 'badge-support';
                                else if (categoryName === 'Education') badgeClass = 'badge-education';
                                else if (categoryName === 'Wellness Tools') badgeClass = 'badge-wellness';
                                %>
                                <span class="resource-type-badge <%= badgeClass %>"><%= categoryName %></span>

                                <h5><%= resource.resourcename %></h5>
                                <p><%= resource.resourcedesc %></p>

                                <% if (resource.resourcephone) { %>
                                    <div class="contact-info">
                                        <i class="bi-telephone-fill text-danger"></i>
                                        <strong><%= resource.resourcephone %></strong>
                                    </div>
                                <% } %>

                                <div class="d-flex gap-2 mt-3 flex-wrap">
                                    <% if (resource.resourcephone) { %>
                                        <a href="tel:<%= resource.resourcephone %>" class="btn btn-call btn-sm">
                                            <i class="bi-telephone-fill me-1"></i>Call
                                        </a>
                                    <% } %>
                                    <% if (resource.resourceurl) { %>
                                        <a href="<%= resource.resourceurl %>" target="_blank" class="btn btn-visit btn-sm">
                                            <i class="bi-box-arrow-up-right me-1"></i>Visit Site
                                        </a>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>
        </section>
        <% }); %>


        <!-- CTA Section - Sign Up Optional -->
        <section class="cta-section text-center" id="signup">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <i class="bi-bookmark-heart" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <h2>Want to Save Your Favorites?</h2>
                        <p class="lead mb-4">
                            Create a free account to save resources, pin important contacts, and build your personalized mental health toolkit. Your information stays private and secure.
                        </p>
                        <div class="d-flex gap-3 justify-content-center flex-wrap">
                            <a href="/register" class="btn btn-light btn-lg">
                                <i class="bi-person-plus me-2"></i>Create Free Account
                            </a>
                            <a href="/login" class="btn btn-outline-light btn-lg">
                                <i class="bi-box-arrow-in-right me-2"></i>Already Have an Account?
                            </a>
                        </div>
                        <p class="mt-3 mb-0" style="opacity: 0.9;">
                            <small>✓ No credit card required  •  ✓ Free forever  •  ✓ Cancel anytime</small>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer py-5" style="background-color: #ebe4d8;">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4 mb-lg-0">
                        <h5 class="mb-3">
                            <i class="bi-heart-fill text-danger me-2"></i>Resource Hub
                        </h5>
                        <p class="text-muted">
                            Connecting people to trusted mental health resources and crisis support. No account required.
                        </p>
                    </div>
                    <div class="col-lg-4 mb-4 mb-lg-0">
                        <h5 class="mb-3">Quick Links</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#crisis" class="text-muted text-decoration-none">Crisis Hotlines</a></li>
                            <li class="mb-2"><a href="#therapy" class="text-muted text-decoration-none">Therapy & Counseling</a></li>
                            <li class="mb-2"><a href="#support" class="text-muted text-decoration-none">Support Groups</a></li>
                            <li class="mb-2"><a href="#education" class="text-muted text-decoration-none">Education</a></li>
                            <li class="mb-2"><a href="#wellness" class="text-muted text-decoration-none">Wellness Tools</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <h5 class="mb-3">Need Immediate Help?</h5>
                        <div class="mb-3">
                            <p class="mb-2">
                                <i class="bi-telephone-fill me-2" style="color: #dc3545;"></i>
                                <strong>Call or Text: 988</strong>
                            </p>
                            <p class="text-muted small mb-0">24/7 Suicide & Crisis Lifeline</p>
                        </div>
                        <div class="mb-3">
                            <p class="mb-2">
                                <i class="bi-chat-dots-fill me-2" style="color: #5a8eb8;"></i>
                                <strong>Text HOME to 741741</strong>
                            </p>
                            <p class="text-muted small mb-0">Crisis Text Line</p>
                        </div>
                    </div>
                </div>
                <hr class="my-4">
                <div class="row">
                    <div class="col-lg-6 text-center text-lg-start">
                        <p class="text-muted small mb-0">&copy; 2025 Suicide Prevention Resource Hub. All Rights Reserved.</p>
                    </div>
                    <div class="col-lg-6 text-center text-lg-end">
                        <a href="#!" class="text-muted text-decoration-none small me-3">Privacy Policy</a>
                        <a href="#!" class="text-muted text-decoration-none small me-3">Terms of Service</a>
                        <a href="#!" class="text-muted text-decoration-none small">Contact</a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        
        <!-- Smooth scrolling -->
        <script>
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#!' && href !== '#') {
                        e.preventDefault();
                        const target = document.querySelector(href);
                        if (target) {
                            // Calculate offset for navbar and emergency banner height plus extra padding
                            const navbarHeight = document.querySelector('.navbar').offsetHeight;
                            const emergencyBannerHeight = document.querySelector('.emergency-banner').offsetHeight;
                            const extraPadding = -30; // Negative padding to scroll further down
                            const offset = navbarHeight + emergencyBannerHeight + extraPadding;

                            const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;

                            window.scrollTo({
                                top: targetPosition,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

            // Filter function to handle both search and category filter
            function filterResources() {
                const searchInput = document.getElementById('resourceSearch').value.toLowerCase().trim();
                const categoryFilter = document.getElementById('categoryFilter').value;
                const allResourceCards = document.querySelectorAll('.resource-card');

                // Split search input into keywords (by spaces)
                const keywords = searchInput.split(/\s+/).filter(k => k.length > 0);

                allResourceCards.forEach(card => {
                    const resourceName = card.querySelector('h5')?.textContent.toLowerCase() || '';
                    const resourceDesc = card.querySelector('p')?.textContent.toLowerCase() || '';
                    const parentSection = card.closest('.resource-section');
                    const sectionId = parentSection ? parentSection.id : '';

                    // Combine all searchable text
                    const searchableText = `${resourceName} ${resourceDesc}`;

                    // Check if ALL keywords are found in the searchable text
                    const matchesSearch = keywords.length === 0 || keywords.every(keyword =>
                        searchableText.includes(keyword)
                    );

                    // Check if matches category filter
                    const matchesCategory = categoryFilter === 'all' || sectionId === categoryFilter;

                    const parentCol = card.closest('.col-md-6');
                    if (parentCol) {
                        parentCol.style.display = (matchesSearch && matchesCategory) ? '' : 'none';
                    }
                });

                // Show/hide category sections if all items are hidden
                const sections = document.querySelectorAll('.resource-section');
                sections.forEach(section => {
                    const visibleCards = section.querySelectorAll('.col-md-6:not([style*="display: none"])');

                    if (visibleCards.length === 0) {
                        section.style.display = 'none';
                    } else {
                        section.style.display = '';
                    }
                });
            }

            // Resource search functionality with keyword support
            document.getElementById('resourceSearch').addEventListener('input', filterResources);

            // Category filter functionality
            document.getElementById('categoryFilter').addEventListener('change', filterResources);

        </script>
    </body>
</html>